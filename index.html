<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CortisolCare - Stress Reduction & Habit Tracking</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%); min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: white; border-radius: 15px; padding: 30px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); border-bottom: 4px solid #4f46e5; }
        .header h1 { font-size: 2.5rem; color: #1f2937; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
        .header p { color: #6b7280; font-size: 1.1rem; }
        .uk-badge { background: #eef2ff; color: #4f46e5; padding: 8px 16px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
        .auth-section { background: #fef3c7; border: 2px solid #f59e0b; border-radius: 15px; padding: 25px; margin-bottom: 30px; display: flex; align-items: center; gap: 20px; }
        .auth-section h3 { color: #92400e; font-size: 1.3rem; margin-bottom: 5px; }
        .auth-section p { color: #b45309; }
        .btn { padding: 12px 24px; border-radius: 10px; border: none; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #4f46e5; color: white; }
        .btn-primary:hover { background: #4338ca; }
        .btn-warning { background: #f59e0b; color: white; }
        .btn-warning:hover { background: #d97706; }
        .lang-switcher { display: flex; background: #f3f4f6; border-radius: 10px; padding: 4px; gap: 4px; margin-bottom: 20px; }
        .lang-btn { padding: 8px 16px; border: none; background: transparent; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .lang-btn.active { background: white; color: #1f2937; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .lang-btn:not(.active) { color: #6b7280; }
        .category { background: white; border-radius: 15px; margin-bottom: 25px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .category-header { padding: 25px; color: white; font-size: 1.3rem; font-weight: 700; display: flex; justify-content: between; align-items: center; }
        .category-content { padding: 30px; }
        .habits-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .habit-item { display: flex; align-items: center; padding: 18px; background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; cursor: pointer; transition: all 0.3s; }
        .habit-item:hover { border-color: #d1d5db; }
        .habit-item.completed { background: #f0fdf4; border-color: #86efac; color: #166534; }
        .checkbox { width: 24px; height: 24px; border: 2px solid #d1d5db; border-radius: 50%; margin-right: 15px; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
        .habit-item.completed .checkbox { background: #22c55e; border-color: #22c55e; color: white; }
        .progress-bar { background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden; margin-bottom: 10px; }
        .progress-fill { height: 100%; background: #22c55e; transition: width 0.5s ease; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .stat-number { font-size: 2.5rem; font-weight: 800; margin-bottom: 5px; }
        .stat-label { color: #6b7280; font-size: 0.9rem; }
        .green { background: #f0fdf4; } .green .stat-number { color: #22c55e; }
        .orange { background: #fff7ed; } .orange .stat-number { color: #ea580c; }
        .blue { background: #eff6ff; } .blue .stat-number { color: #2563eb; }
        .purple { background: #faf5ff; } .purple .stat-number { color: #9333ea; }
        .nutrition { background: #22c55e; }
        .sleep { background: #4f46e5; }
        .exercise { background: #ea580c; }
        .warmth { background: #ec4899; }
        .breathing { background: #06b6d4; }
        .digital { background: #8b5cf6; }
        .social { background: #ef4444; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.show { display: flex; }
        .modal-content { background: white; border-radius: 15px; padding: 40px; max-width: 500px; width: 90%; position: relative; }
        .modal h2 { text-align: center; margin-bottom: 20px; color: #1f2937; }
        .form-group { margin-bottom: 20px; }
        .form-input { width: 100%; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1rem; }
        .form-input:focus { outline: none; border-color: #4f46e5; }
        .close-btn { position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6b7280; }
        .footer { text-align: center; margin-top: 50px; color: #6b7280; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 20px;">
                <div>
                    <h1>
                        🧠 <span id="app-title">CortisolCare</span>
                        <span class="uk-badge" id="uk-badge">🇬🇧 Made in UK</span>
                    </h1>
                    <p id="app-subtitle">Your journey to stress reduction and better wellbeing</p>
                </div>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <div class="lang-switcher">
                        <button class="lang-btn active" onclick="setLanguage('en')">🇬🇧 EN</button>
                        <button class="lang-btn" onclick="setLanguage('ru')">🇷🇺 RU</button>
                    </div>
                    <button class="btn btn-primary" onclick="showAuth()" id="auth-btn">🔑 Sign In</button>
                </div>
            </div>
        </div>

        <!-- Auth Prompt -->
        <div class="auth-section" id="auth-prompt">
            <div>
                <h3 id="auth-prompt-title">Sign in to save your progress</h3>
                <p id="auth-prompt-desc">Create an account or sign in to track habits and view statistics.</p>
            </div>
            <button class="btn btn-warning" onclick="showAuth()" id="register-btn">➕ Register</button>
        </div>

        <!-- Date Selector -->
        <div class="category">
            <div class="category-header" style="background: #4f46e5;">
                <div style="display: flex; align-items: center;">
                    <span style="margin-right: 15px;">📅</span>
                    <input type="date" id="current-date" style="background: transparent; border: none; color: white; font-size: 1.2rem; font-weight: 600;">
                </div>
                <button class="btn" style="background: rgba(255,255,255,0.2); color: white;" onclick="toggleStats()" id="stats-btn">📊 Statistics</button>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats" id="stats-section" style="display: none;">
            <div class="stat-card green">
                <div class="stat-number" id="total-progress">0%</div>
                <div class="stat-label" id="today-label">Today</div>
            </div>
            <div class="stat-card orange">
                <div class="stat-number" id="streak-days">0</div>
                <div class="stat-label" id="streak-label">days streak</div>
            </div>
            <div class="stat-card blue">
                <div class="stat-number">28</div>
                <div class="stat-label" id="habits-label">Total habits</div>
            </div>
            <div class="stat-card purple">
                <div class="stat-number">7</div>
                <div class="stat-label" id="categories-label">Categories</div>
            </div>
        </div>

        <!-- Habit Categories -->
        <div id="habits-container"></div>

        <!-- Tip Section -->
        <div class="category">
            <div class="category-header" style="background: linear-gradient(135deg, #4f46e5, #8b5cf6);">
                <h3 id="tip-title">💡 Daily Tip</h3>
            </div>
            <div class="category-content">
                <p id="tip-text" style="color: #4b5563; line-height: 1.6;">
                    Cortisol is the stress hormone. Regular practice of these habits will help naturally reduce its levels. 
                    Particularly effective: deep breathing, hugs, quality sleep and moderate physical activity.
                </p>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p id="footer-text">© 2025 CortisolCare - Your health in your hands</p>
            <p id="footer-sub">UK-based wellness technology</p>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="hideAuth()">✕</button>
            <h2 id="modal-title">Sign in to your account</h2>
            <form onsubmit="handleAuth(event)">
                <div class="form-group" id="name-group" style="display: none;">
                    <input type="text" class="form-input" id="name-input" placeholder="Your name">
                </div>
                <div class="form-group">
                    <input type="email" class="form-input" id="email-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" id="password-input" placeholder="Password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;" id="submit-btn">Sign In</button>
            </form>
            <div style="text-align: center;">
                <button onclick="switchAuthMode()" style="background: none; border: none; color: #4f46e5; cursor: pointer;" id="switch-btn">
                    Don't have an account? Sign up
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'en';
        let currentUser = null;
        let habits = {};
        let authMode = 'login';
        let showingStats = false;
        
        const translations = {
            en: {
                appTitle: "CortisolCare",
                appSubtitle: "Your journey to stress reduction and better wellbeing",
                authBtn: "🔑 Sign In",
                registerBtn: "➕ Register",
                authPromptTitle: "Sign in to save your progress",
                authPromptDesc: "Create an account or sign in to track habits and view statistics.",
                statsBtn: "📊 Statistics",
                todayLabel: "Today",
                streakLabel: "days streak",
                habitsLabel: "Total habits",
                categoriesLabel: "Categories",
                tipTitle: "💡 Daily Tip",
                tipText: "Cortisol is the stress hormone. Regular practice of these habits will help naturally reduce its levels. Particularly effective: deep breathing, hugs, quality sleep and moderate physical activity.",
                footerText: "© 2025 CortisolCare - Your health in your hands",
                footerSub: "UK-based wellness technology",
                ukBadge: "🇬🇧 Made in UK",
                loginTitle: "Sign in to your account",
                registerTitle: "Create your account",
                name: "Your name",
                email: "Email",
                password: "Password",
                signIn: "Sign In",
                signUp: "Sign Up",
                noAccount: "Don't have an account? Sign up",
                hasAccount: "Already have an account? Sign in",
                categories: {
                    nutrition: { name: "Nutrition", items: ["Breakfast before 9 AM", "Lunch without rush", "8 glasses of water", "Dinner 3h before bed"] },
                    sleep: { name: "Sleep", items: ["Bed before 11 PM", "Slept 7-8 hours", "Woke up rested", "No screens 1h before bed"] },
                    exercise: { name: "Activity", items: ["Morning exercise", "30 min walk", "Stretching", "Strength training"] },
                    warmth: { name: "Warmth & Comfort", items: ["Hugs (5+ min)", "Warm socks", "Cozy environment", "Warm bath/shower"] },
                    breathing: { name: "Breathing & Peace", items: ["Breathing practice", "10 min meditation", "Silence and peace", "Gratitude practice"] },
                    digital: { name: "Digital Detox", items: ["No phone 1h morning", "No social media before lunch", "'Do not disturb' mode", "Offline time evening"] },
                    social: { name: "Emotional Support", items: ["Talk with loved ones", "Pleasant conversation", "Support others", "Time for yourself"] }
                }
            },
            ru: {
                appTitle: "КортизолТрекер",
                appSubtitle: "Ваш путь к снижению стресса и улучшению самочувствия",
                authBtn: "🔑 Войти",
                registerBtn: "➕ Регистрация",
                authPromptTitle: "Войдите, чтобы сохранить прогресс",
                authPromptDesc: "Создайте аккаунт или войдите, чтобы отслеживать привычки и видеть статистику.",
                statsBtn: "📊 Статистика",
                todayLabel: "Сегодня",
                streakLabel: "дней подряд",
                habitsLabel: "Всего привычек",
                categoriesLabel: "Категорий",
                tipTitle: "💡 Совет дня",
                tipText: "Кортизол - это гормон стресса. Регулярное выполнение этих привычек поможет естественным образом снизить его уровень. Особенно эффективны: глубокое дыхание, объятия, качественный сон и умеренная физическая активность.",
                footerText: "© 2025 КортизолКеа - Ваше здоровье в ваших руках",
                footerSub: "Британские велнес технологии",
                ukBadge: "🇬🇧 Сделано в Великобритании",
                loginTitle: "Вход в аккаунт",
                registerTitle: "Создание аккаунта",
                name: "Ваше имя",
                email: "Email",
                password: "Пароль",
                signIn: "Войти",
                signUp: "Зарегистрироваться",
                noAccount: "Нет аккаунта? Зарегистрируйтесь",
                hasAccount: "Уже есть аккаунт? Войдите",
                categories: {
                    nutrition: { name: "Питание", items: ["Завтрак до 9:00", "Обед без спешки", "8 стаканов воды", "Ужин за 3ч до сна"] },
                    sleep: { name: "Сон", items: ["Лёг до 23:00", "Проспал 7-8 часов", "Проснулся отдохнувшим", "Без экранов за час до сна"] },
                    exercise: { name: "Активность", items: ["Утренняя зарядка", "30 мин прогулки", "Растяжка", "Силовая тренировка"] },
                    warmth: { name: "Тепло и уют", items: ["Объятия (5+ мин)", "Тёплые носочки", "Уютная обстановка", "Тёплая ванна/душ"] },
                    breathing: { name: "Дыхание и покой", items: ["Дыхательная практика", "10 мин медитации", "Тишина и покой", "Практика благодарности"] },
                    digital: { name: "Цифровой детокс", items: ["Без телефона 1ч утром", "Без соцсетей до обеда", "Режим 'Не беспокоить'", "Офлайн время вечером"] },
                    social: { name: "Эмоциональная поддержка", items: ["Общение с близкими", "Приятное общение", "Поддержка других", "Время для себя"] }
                }
            }
        };

        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateUI();
        }

        function updateUI() {
            const t = translations[currentLanguage];
            
            document.getElementById('app-title').textContent = t.appTitle;
            document.getElementById('app-subtitle').textContent = t.appSubtitle;
            document.getElementById('uk-badge').textContent = t.ukBadge;
            document.getElementById('auth-btn').innerHTML = t.authBtn;
            document.getElementById('register-btn').innerHTML = t.registerBtn;
            document.getElementById('auth-prompt-title').textContent = t.authPromptTitle;
            document.getElementById('auth-prompt-desc').textContent = t.authPromptDesc;
            document.getElementById('stats-btn').innerHTML = t.statsBtn;
            document.getElementById('today-label').textContent = t.todayLabel;
            document.getElementById('streak-label').textContent = t.streakLabel;
            document.getElementById('habits-label').textContent = t.habitsLabel;
            document.getElementById('categories-label').textContent = t.categoriesLabel;
            document.getElementById('tip-title').innerHTML = t.tipTitle;
            document.getElementById('tip-text').textContent = t.tipText;
            document.getElementById('footer-text').textContent = t.footerText;
            document.getElementById('footer-sub').textContent = t.footerSub;
            
            renderCategories();
            updateStats();
        }

        function renderCategories() {
            const container = document.getElementById('habits-container');
            const t = translations[currentLanguage];
            const categories = ['nutrition', 'sleep', 'exercise', 'warmth', 'breathing', 'digital', 'social'];
            const colors = ['nutrition', 'sleep', 'exercise', 'warmth', 'breathing', 'digital', 'social'];
            const icons = ['☕', '🌙', '🏋️', '🌡️', '💨', '📱', '❤️'];
            
            container.innerHTML = '';
            
            categories.forEach((catId, index) => {
                const category = t.categories[catId];
                const progress = getCategoryProgress(catId);
                
                const categoryHTML = `
                    <div class="category">
                        <div class="category-header ${colors[index]}">
                            <div style="display: flex; align-items: center;">
                                <span style="margin-right: 15px; font-size: 1.5rem;">${icons[index]}</span>
                                <h3>${category.name}</h3>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 1.5rem; font-weight: 800;">${progress}%</div>
                                <div style="font-size: 0.9rem; opacity: 0.9;">Completed</div>
                            </div>
                        </div>
                        <div class="category-content">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <div class="habits-grid">
                                ${category.items.map((item, itemIndex) => `
                                    <div class="habit-item ${getHabitStatus(catId, itemIndex) ? 'completed' : ''}" 
                                         onclick="toggleHabit('${catId}', ${itemIndex})">
                                        <div class="checkbox">
                                            ${getHabitStatus(catId, itemIndex) ? '✓' : ''}
                                        </div>
                                        <span>${item}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                container.innerHTML += categoryHTML;
            });
        }

        function toggleHabit(categoryId, itemIndex) {
            if (!currentUser) {
                showAuth();
                return;
            }
            
            const currentDate = document.getElementById('current-date').value;
            const key = `${currentUser.id}-${currentDate}-${categoryId}-${itemIndex}`;
            habits[key] = !habits[key];
            localStorage.setItem('cortisol-habits', JSON.stringify(habits));
            renderCategories();
            updateStats();
        }

        function getHabitStatus(categoryId, itemIndex) {
            if (!currentUser) return false;
            const currentDate = document.getElementById('current-date').value;
            const key = `${currentUser.id}-${currentDate}-${categoryId}-${itemIndex}`;
            return habits[key] || false;
        }

        function getCategoryProgress(categoryId) {
            const t = translations[currentLanguage];
            const category = t.categories[categoryId];
            const completed = category.items.filter((_, index) => getHabitStatus(categoryId, index)).length;
            return Math.round((completed / category.items.length) * 100);
        }

        function getTotalProgress() {
            const t = translations[currentLanguage];
            const categories = Object.keys(t.categories);
            let totalItems = 0;
            let completedItems = 0;
            
            categories.forEach(catId => {
                const category = t.categories[catId];
                totalItems += category.items.length;
                completedItems += category.items.filter((_, index) => getHabitStatus(catId, index)).length;
            });
            
            return totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;
        }

        function getStreakDays() {
            if (!currentUser) return 0;
            // Simplified streak calculation
            return Math.floor(Math.random() * 10); // Placeholder
        }

        function updateStats() {
            document.getElementById('total-progress').textContent = getTotalProgress() + '%';
            document.getElementById('streak-days').textContent = getStreakDays();
        }

        function showAuth() {
            document.getElementById('auth-modal').classList.add('show');
        }

        function hideAuth() {
            document.getElementById('auth-modal').classList.remove('show');
        }

        function switchAuthMode() {
            authMode = authMode === 'login' ? 'register' : 'login';
            const t = translations[currentLanguage];
            
            if (authMode === 'register') {
                document.getElementById('modal-title').textContent = t.registerTitle;
                document.getElementById('submit-btn').textContent = t.signUp;
                document.getElementById('switch-btn').textContent = t.hasAccount;
                document.getElementById('name-group').style.display = 'block';
                document.getElementById('name-input').placeholder = t.name;
            } else {
                document.getElementById('modal-title').textContent = t.loginTitle;
                document.getElementById('submit-btn').textContent = t.signIn;
                document.getElementById('switch-btn').textContent = t.noAccount;
                document.getElementById('name-group').style.display = 'none';
            }
            
            document.getElementById('email-input').placeholder = t.email;
            document.getElementById('password-input').placeholder = t.password;
        }

        function handleAuth(event) {
            event.preventDefault();
            
            const email = document.getElementById('email-input').value;
            const password = document.getElementById('password-input').value;
            const name = document.getElementById('name-input').value;
            
            currentUser = {
                id: Date.now(),
                email: email,
                name: name || email.split('@')[0],
                subscription: 'free',
                joinDate: new Date().toISOString()
            };
            
            localStorage.setItem('cortisol-current-user', JSON.stringify(currentUser));
            hideAuth();
            document.getElementById('auth-prompt').style.display = 'none';
            
            // Clear form
            document.getElementById('email-input').value = '';
            document.getElementById('password-input').value = '';
            document.getElementById('name-input').value = '';
            
            renderCategories();
            updateStats();
        }

        function toggleStats() {
            showingStats = !showingStats;
            const statsSection = document.getElementById('stats-section');
            statsSection.style.display = showingStats ? 'grid' : 'none';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            document.getElementById('current-date').value = new Date().toISOString().split('T')[0];
            
            // Load saved user
            const savedUser = localStorage.getItem('cortisol-current-user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('auth-prompt').style.display = 'none';
            }
            
            // Load saved habits
            const savedHabits = localStorage.getItem('cortisol-habits');
            if (savedHabits) {
                habits = JSON.parse(savedHabits);
            }
            
            // Auto-detect language
            const browserLang = navigator.language.slice(0, 2);
            if (browserLang === 'ru') {
                setLanguage('ru');
            } else {
                updateUI();
            }
            
            // Date change handler
            document.getElementById('current-date').addEventListener('change', function() {
                renderCategories();
                updateStats();
            });
        });
    </script>
</body>
</html>
